import{d as p,r as w,a as I,b as n,e as i,f as o,n as b,u,l as _,v as S,i as h,k as x,I as T,F as v,j as k,h as C,z as B,J as V,K as j,_ as D,q as F,m as N}from"./app.f554c489.js";const f=e=>(V("data-v-9ec7d449"),e=e(),j(),e),z={class:"my-2"},K=["disabled"],M={class:"ml-3"},O=f(()=>o("i",{class:"fa-regular fa-pen-nib"},null,-1)),q=[O],E={key:1,type:"submit",class:"text-teal-500 hover:bg-gray-100 px-2 py-0.5 rounded-sm"},J=f(()=>o("i",{class:"fa-regular fa-floppy-disk"},null,-1)),L=[J],U=f(()=>o("i",{class:"fa-light fa-rectangle-history-circle-plus"},null,-1)),A=[U],G=f(()=>o("i",{class:"fas fa-times relative left-px"},null,-1)),H=[G],P={key:0,class:"px-6"},Q=p({__name:"TreeItem",props:{category:Object},setup(e){const{category:s}=e;s.disabled=!0,s.oldname=s.name;const d=w(!1),c=I(()=>s.children_categories&&s.children_categories.length);function r(){s.disabled!=!1&&(d.value=!d.value)}function g(t){if(t.name==t.oldname)return t.disabled=!0;axios.put(`/categories/${t.id}`,{name:t.name}).then(()=>{t.disabled=!0,t.oldname=t.name})}function m(t){t.children_categories.length==0&&axios.delete(`/categories/${t.id}`).then(a=>{s.children_categories=s.children_categories.filter(y=>y.id!=t.id)})}function $(t){axios.post("/categories/sub",t).then(a=>{t.children_categories.push(a.data),d.value=!0})}return(t,a)=>{const y=B("TreeItem",!0);return n(),i("li",z,[o("form",{class:"flex items-center",onSubmit:a[4]||(a[4]=x(l=>g(e.category),["prevent"]))},[o("div",{onClick:r,class:b([{"cursor-pointer":u(c)&&e.category.disabled},"flex items-center justify-between hover:pl-2 transition-all hover:bg-gray-100 w-72"])},[_(o("input",{class:b([{"!border-teal-600 shadow-inner  px-2":e.category.disabled==!1,"cursor-pointer":u(c)&&e.category.disabled},"border-b border-transparent outline-none py-0.5 w-32"]),type:"text","onUpdate:modelValue":a[0]||(a[0]=l=>e.category.name=l),disabled:e.category.disabled},null,10,K),[[S,e.category.name]]),u(c)?(n(),i("i",{key:0,class:b([{"rotate-180":d.value,"text-gray-300":e.category.disabled==!1},"mx-2 far fa-angle-down"])},null,2)):h("",!0)],2),o("main",M,[e.category.disabled?(n(),i("button",{key:0,onClick:a[1]||(a[1]=l=>e.category.disabled=!e.category.disabled),type:"button",class:"text-teal-500 hover:bg-gray-100 px-2 py-0.5 rounded-sm"},q)):(n(),i("button",E,L)),o("button",{onClick:a[2]||(a[2]=l=>$(e.category)),class:"hover:bg-gray-100 px-2 py-0.5 rounded-sm text-teal-600 mx-2"},A),u(c)==!1?(n(),i("button",{key:2,onClick:a[3]||(a[3]=l=>t.$emit("delete",e.category)),type:"button",class:"text-red-500 hover:bg-gray-100 px-2 py-0.5 rounded-sm"},H)):h("",!0)])],32),u(c)?_((n(),i("ul",P,[(n(!0),i(v,null,k(e.category.children_categories,l=>(n(),C(y,{class:"my-2",key:l.id,category:l,onDelete:m},null,8,["category"]))),128))],512)),[[T,d.value]]):h("",!0)])}}});const R=D(Q,[["__scopeId","data-v-9ec7d449"]]),W={key:0},X=["onSubmit"],Y=o("button",{class:"px-4 py-1.5 bg-pink-500 text-white shadow rounded-sm active:bg-gray-300 active:shadow-sm flex items-center"},[N(" Kiritish "),o("i",{class:"ml-4 fa-light fa-rectangle-history-circle-plus"})],-1),Z=[Y],te=p({__name:"Categories",setup(e){const s=F({children_categories:[]});function d(){axios.post("/categories",{name:"category"}).then(r=>{s.children_categories.push(r.data)})}function c(r){axios.delete(`/categories/${r.id}`).then(()=>{s.children_categories=s.children_categories.filter(g=>g.id!=r.id)})}return axios.get("/categories").then(r=>{s.children_categories=r.data}),(r,g)=>(n(),i("section",null,[s.children_categories.length?(n(),i("ul",W,[(n(!0),i(v,null,k(s.children_categories,m=>(n(),C(R,{key:m.id,category:m,onDelete:c},null,8,["category"]))),128))])):h("",!0),o("form",{onSubmit:x(d,["prevent"])},Z,40,X)]))}});export{te as default};
