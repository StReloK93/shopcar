import{d as x,r as $,a as w,b as i,e as o,f as s,n as m,u,l as _,v as I,i as b,k as T,L as S,F as p,j as k,h as v,A as j,E as B,G as V,_ as D,q as F,m as N}from"./app.a40bcdf9.js";const h=e=>(B("data-v-d37a2a3f"),e=e(),V(),e),E={class:"my-2"},L=["disabled"],M={class:"ml-3"},O=h(()=>s("i",{class:"fa-regular fa-pen-nib"},null,-1)),q=[O],z={key:1,type:"submit",class:"mini-button h-full text-cyan-500 border-cyan-500"},A=h(()=>s("i",{class:"fa-regular fa-floppy-disk"},null,-1)),G=[A],U=h(()=>s("i",{class:"fa-light fa-rectangle-history-circle-plus"},null,-1)),H=[U],J=h(()=>s("i",{class:"fas fa-times relative left-px"},null,-1)),K=[J],P={key:0,class:"pl-6 my-3 pb-4"},Q=x({__name:"TreeItem",props:{category:Object},setup(e){const{category:a}=e;a.disabled=!0,a.oldname=a.name;const c=$(!1),l=w(()=>a.children_categories&&a.children_categories.length);function r(){a.disabled!=!1&&(c.value=!c.value)}function g(t){if(t.name==t.oldname)return t.disabled=!0;axios.put(`/categories/${t.id}`,{name:t.name}).then(()=>{t.disabled=!0,t.oldname=t.name})}function f(t){t.children_categories.length==0&&axios.delete(`/categories/${t.id}`).then(n=>{a.children_categories=a.children_categories.filter(y=>y.id!=t.id)})}function C(t){axios.post("/categories/sub",t).then(n=>{t.children_categories.push(n.data),c.value=!0})}return(t,n)=>{const y=j("TreeItem",!0);return i(),o("li",E,[s("form",{class:"flex",onSubmit:n[4]||(n[4]=T(d=>g(e.category),["prevent"]))},[s("div",{onClick:r,class:m([{"cursor-pointer":u(l)&&e.category.disabled},"select-none flex items-center justify-between border-b bg-gray-50 shadow-sm flex-grow px-2 py-0.5"])},[_(s("input",{class:m([{"!border-pink-600 shadow-inner":e.category.disabled==!1,"cursor-pointer":u(l)&&e.category.disabled},"border-b border-transparent outline-none py-0.5 px-2 text-gray-600 disabled:!text-gray-500 disabled:select-none"]),type:"text","onUpdate:modelValue":n[0]||(n[0]=d=>e.category.name=d),disabled:e.category.disabled},null,10,L),[[I,e.category.name]]),u(l)?(i(),o("i",{key:0,class:m([{"rotate-180":c.value,"text-gray-300":e.category.disabled==!1},"mx-2 far fa-angle-down"])},null,2)):b("",!0)],2),s("main",M,[e.category.disabled?(i(),o("button",{key:0,onClick:n[1]||(n[1]=d=>e.category.disabled=!e.category.disabled),type:"button",class:"mini-button mr-4 h-full text-cyan-500 border-cyan-500"},q)):(i(),o("button",z,G)),s("button",{onClick:n[2]||(n[2]=d=>C(e.category)),class:m([{"mr-4":u(l)==!1},"mini-button h-full text-pink-500 border-pink-500"])},H,2),u(l)==!1?(i(),o("button",{key:2,onClick:n[3]||(n[3]=d=>t.$emit("delete",e.category)),type:"button",class:"mini-button h-full text-red-500 border-red-500"},K)):b("",!0)])],32),u(l)?_((i(),o("ul",P,[(i(!0),o(p,null,k(e.category.children_categories,d=>(i(),v(y,{class:"my-2",key:d.id,category:d,onDelete:f},null,8,["category"]))),128))],512)),[[S,c.value]]):b("",!0)])}}});const R=D(Q,[["__scopeId","data-v-d37a2a3f"]]),W=s("h3",{class:"text-gray-600 flex items-center"},[s("i",{class:"fa-light fa-timeline text-pink-500 mr-3 text-xl"}),N(" Turlar ")],-1),X=s("i",{class:"fa-light fa-rectangle-history-circle-plus"},null,-1),Y=[X],Z={key:0},te=x({__name:"Categories",setup(e){const a=F({children_categories:[]});function c(){axios.post("/categories",{name:"category"}).then(r=>{a.children_categories.push(r.data)})}function l(r){axios.delete(`/categories/${r.id}`).then(()=>{a.children_categories=a.children_categories.filter(g=>g.id!=r.id)})}return axios.get("/categories").then(r=>{a.children_categories=r.data}),(r,g)=>(i(),o("section",null,[s("div",{class:"mb-4 flex justify-between items-center"},[W,s("button",{onClick:c,class:"px-4 py-0.5 bg-gray-100 text-pink-500 border-b border-pink-500 shadow hover:bg-gray-50 active:bg-pink-100"},Y)]),a.children_categories.length?(i(),o("ul",Z,[(i(!0),o(p,null,k(a.children_categories,f=>(i(),v(R,{key:f.id,category:f,onDelete:l},null,8,["category"]))),128))])):b("",!0)]))}});export{te as default};
