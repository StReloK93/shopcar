import{d as x,r as $,c as w,a as i,b as o,e as a,n as b,u,k as _,v as I,h as f,j as T,I as S,F as p,i as k,g as v,z as j,D as B,E as D,_ as V,x as F,l as N}from"./app.eed0d982.js";const h=e=>(B("data-v-23637372"),e=e(),D(),e),z={class:"my-2"},E=["disabled"],M={class:"ml-3"},O=h(()=>a("i",{class:"fa-regular fa-pen-nib"},null,-1)),L=[O],U={key:1,type:"submit",class:"mini-button h-full text-cyan-500 border-cyan-500"},q=h(()=>a("i",{class:"fa-regular fa-floppy-disk"},null,-1)),A=[q],G=h(()=>a("i",{class:"fa-light fa-rectangle-history-circle-plus"},null,-1)),H=[G],J=h(()=>a("i",{class:"fas fa-times relative left-px"},null,-1)),K=[J],P={key:0,class:"pl-6 my-3 pb-4"},Q=x({__name:"TreeItem",props:{category:Object},setup(e){const{category:s}=e;s.disabled=!0,s.oldname=s.name;const d=$(!1),l=w(()=>s.children_categories&&s.children_categories.length);function r(){s.disabled!=!1&&(d.value=!d.value)}function g(t){if(t.name==t.oldname)return t.disabled=!0;axios.put(`/categories/${t.id}`,{name:t.name}).then(()=>{t.disabled=!0,t.oldname=t.name})}function m(t){t.children_categories.length==0&&axios.delete(`/categories/${t.id}`).then(n=>{s.children_categories=s.children_categories.filter(y=>y.id!=t.id)})}function C(t){axios.post("/categories/sub",t).then(n=>{t.children_categories.push(n.data),d.value=!0})}return(t,n)=>{const y=j("TreeItem",!0);return i(),o("li",z,[a("form",{class:"flex",onSubmit:n[4]||(n[4]=T(c=>g(e.category),["prevent"]))},[a("div",{onClick:r,class:b([{"cursor-pointer":u(l)&&e.category.disabled},"select-none flex items-center justify-between border-b bg-gray-50 shadow-sm flex-grow px-2 py-0.5"])},[_(a("input",{class:b([{"!border-pink-600 shadow-inner":e.category.disabled==!1,"cursor-pointer":u(l)&&e.category.disabled},"border-b border-transparent outline-none py-0.5 px-2 text-gray-600 disabled:!text-gray-500 disabled:select-none"]),type:"text","onUpdate:modelValue":n[0]||(n[0]=c=>e.category.name=c),disabled:e.category.disabled},null,10,E),[[I,e.category.name]]),u(l)?(i(),o("i",{key:0,class:b([{"rotate-180":d.value,"text-gray-300":e.category.disabled==!1},"mx-2 far fa-angle-down"])},null,2)):f("",!0)],2),a("main",M,[e.category.disabled?(i(),o("button",{key:0,onClick:n[1]||(n[1]=c=>e.category.disabled=!e.category.disabled),type:"button",class:"mini-button mr-4 h-full text-cyan-500 border-cyan-500"},L)):(i(),o("button",U,A)),a("button",{onClick:n[2]||(n[2]=c=>C(e.category)),class:b([{"mr-4":u(l)==!1},"mini-button h-full text-pink-500 border-pink-500"])},H,2),u(l)==!1?(i(),o("button",{key:2,onClick:n[3]||(n[3]=c=>t.$emit("delete",e.category)),type:"button",class:"mini-button h-full text-red-500 border-red-500"},K)):f("",!0)])],32),u(l)?_((i(),o("ul",P,[(i(!0),o(p,null,k(e.category.children_categories,c=>(i(),v(y,{class:"my-2",key:c.id,category:c,onDelete:m},null,8,["category"]))),128))],512)),[[S,d.value]]):f("",!0)])}}});const R=V(Q,[["__scopeId","data-v-23637372"]]),W=a("h3",{class:"text-gray-600 flex items-center"},[a("i",{class:"fa-light fa-timeline text-pink-500 mr-3 text-xl"}),N(" Turlar ")],-1),X=a("i",{class:"fa-light fa-rectangle-history-circle-plus"},null,-1),Y=[X],Z={key:0},te=x({__name:"Categories",setup(e){const s=F({children_categories:[]});function d(){axios.post("/categories",{name:"category"}).then(r=>{s.children_categories.push(r.data)})}function l(r){axios.delete(`/categories/${r.id}`).then(()=>{s.children_categories=s.children_categories.filter(g=>g.id!=r.id)})}return axios.get("/categories").then(r=>{s.children_categories=r.data}),(r,g)=>(i(),o("section",null,[a("div",{class:"mb-4 flex justify-between items-center"},[W,a("button",{onClick:d,class:"px-4 py-0.5 bg-gray-100 text-pink-500 border-b border-pink-500 shadow hover:bg-gray-50 active:bg-pink-100"},Y)]),s.children_categories.length?(i(),o("ul",Z,[(i(!0),o(p,null,k(s.children_categories,m=>(i(),v(R,{key:m.id,category:m,onDelete:l},null,8,["category"]))),128))])):f("",!0)]))}});export{te as default};
