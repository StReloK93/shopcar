import{g as z,s as q,u as j,P as M,a as A}from"./Products.0fe9fe29.js";import{H as U,r as C,a as k,d as h,b as s,e as i,f as e,t as F,u,n as b,i as T,l as v,L as B,F as S,j as P,h as w,A as Q,v as D,J as E,q as V,s as L,k as I,m as J,g as y,_ as K}from"./app.a40bcdf9.js";const G=U("qrcode",()=>{const t=C(JSON.parse(z("qrcode",!0))),c=k(()=>t.value);function l(m){q("qrcode",m),t.value=JSON.parse(z("qrcode",!0))}return{qrcode:t,setQrcode:l,getQrcode:c}}),H={class:"mb-2"},R={class:"px-2"},W={key:0,class:"pl-6"},X=h({__name:"TreeItemFree",props:{category:Object,PageData:Object,Categories:Object},setup(t){const{category:c,PageData:l,Categories:m}=t;c.isOpen=!1;const a=k(()=>c.children_categories&&c.children_categories.length);function d(){if(a.value)m.forEach(n=>{n.id==c.id?n.isOpen=!n.isOpen:n.isOpen=!1});else{if(l.category_id==c.id)return l.category_id=null,l.category_name=null;l.category_id=c.id,l.category_name=c.name}}return(n,p)=>{const o=Q("TreeItemFree",!0);return s(),i("section",H,[e("div",{onmousedown:"return false",onClick:d,class:b([{"!bg-pink-500 text-white":t.PageData.category_id==t.category.id,"border-pink-600":u(a)==!1},"cursor-pointer flex-between-center py-1 w-full bg-gray-100 border-l-2"])},[e("span",R,F(t.category.name),1),u(a)?(s(),i("i",{key:0,class:b([{"rotate-180":t.category.isOpen},"mx-2 far fa-angle-down"])},null,2)):T("",!0)],2),u(a)?v((s(),i("ul",W,[(s(!0),i(S,null,P(t.category.children_categories,$=>(s(),w(o,{class:"my-2",key:$.id,Categories:t.category.children_categories,category:$,PageData:t.PageData},null,8,["Categories","category","PageData"]))),128))],512)),[[B,t.category.isOpen]]):T("",!0)])}}}),Y={key:0,class:"fal fa-check text-teal-600"},Z={key:1,class:"fal fa-check text-teal-600"},ee={key:2,class:"fal fa-check text-teal-600"},te={key:3,class:"fal fa-check text-teal-600"},ae={key:4,class:"fas fa-circle text-red-600 text-[8px]"},x=h({__name:"Validate",props:["FormData","keyname","inputType","value"],setup(t){return(c,l)=>t.inputType=="string"&&t.FormData[t.keyname].trim()!=""?(s(),i("i",Y)):t.inputType=="number"&&t.FormData[t.keyname]!=""?(s(),i("i",Z)):t.inputType=="nullable"&&t.FormData[t.keyname]!=null?(s(),i("i",ee)):t.inputType=="array"&&t.value!=0?(s(),i("i",te)):(s(),i("i",ae))}}),se=h({__name:"Select",props:["FormData","PageData"],setup(t){const{FormData:c,PageData:l}=t;function m(a){if(c.products=[],a==null)return;const{sizes:d}=l.sizeNames.find(n=>n.id==a);d.forEach(n=>{c.products.push({id:n.id,name:n.name,count:0})})}return(a,d)=>{const n=Q("vSelect");return s(),w(n,{class:"selects mb-2",options:t.PageData.sizeNames,"onUpdate:modelValue":[m,d[0]||(d[0]=p=>t.FormData.size_names_id=p)],reduce:p=>p.id,modelValue:t.FormData.size_names_id,label:"name",placeholder:"Tanlang"},null,8,["options","reduce","modelValue"])}}}),ne={key:0,class:"flex min-w-min mb-2 relative z-50 bg-gray-50"},oe=["onClick"],le=e("i",{class:"far fa-angle-up"},null,-1),re=[le],ie={class:"bg-gray-200 rounded-sm shadow flex flex-col items-center justify-between overflow-hidden"},ce={class:"w-10 text-center py-1 bg-gray-500 text-gray-100"},de=["onUpdate:modelValue"],ue=["disabled","onClick"],me=e("i",{class:"far fa-angle-down"},null,-1),_e=[me],ge={key:1,class:"flex min-w-min mb-2 relative z-50 bg-gray-50 border-y"},pe={class:"flex flex-col mr-1.5 text-gray-300"},ye=e("main",{class:"size-button mb-1"},[e("i",{class:"far fa-angle-up"})],-1),be={class:"bg-gray-200 rounded shadow flex flex-col items-center justify-between"},fe=e("span",{class:"w-10 text-center py-1 bg-gray-100 text-gray-300"},"\u041A\u043E\u043B",-1),he={class:"w-10 text-center py-1"},xe=e("main",{class:"size-button mt-1"},[e("i",{class:"far fa-angle-down"})],-1),ke=h({__name:"Size",props:["FormData"],setup(t){const c=l=>{l.count>0&&l.count--};return(l,m)=>t.FormData.products.length!=0?(s(),i("main",ne,[(s(!0),i(S,null,P(t.FormData.products,(a,d)=>(s(),i("div",{key:d,class:b([{"mr-0":d==t.FormData.products.length-1},"flex flex-col mr-1.5"])},[e("main",{onClick:n=>a.count++,class:"size-button mb-1"},re,8,oe),e("aside",ie,[e("span",ce,F(a.name),1),v(e("input",{class:b([{"bg-pink-500 text-white":a.count!=0},"w-10 text-center py-1 outline-none px-0"]),type:"number",step:"0.001","onUpdate:modelValue":n=>a.count=n},null,10,de),[[D,a.count]])]),e("main",{disabled:a.count==0,onClick:n=>c(a),class:b([{"text-gray-300":a.count==0},"size-button mt-1"])},_e,10,ue)],2))),128))])):(s(),i("main",ge,[(s(),i(S,null,P(5,a=>e("div",pe,[ye,e("aside",be,[fe,e("span",he,F(a),1)]),xe])),64))]))}}),ve=["onSubmit"],we={class:"mb-2 flex justify-between text-gray-400"},$e=e("i",{class:"fa-sharp fa-light fa-qrcode"},null,-1),De=[$e],Ce=e("i",{class:"fa-light fa-barcode-read"},null,-1),Fe=[Ce],Te=e("i",{class:"far fa-times py-3 px-4 text-red-600"},null,-1),Se=[Te],Pe=e("h3",{class:"font-bold text-xl mb-2 text-gray-600"}," Mahsulot turini tanlang ",-1),Ne={class:"mb-2 cursor-pointer"},Oe=e("label",{class:"text-gray-400 mb-1 flex-between-center"},[e("span",null,"Mahsulot turi")],-1),ze={key:0,class:"text-input rounde-sm bg-pink-500 text-white"},Ve={class:"font-semibold"},Ie={key:1,class:"text-input px-0 flex-between-center"},Qe=e("i",{class:"fas fa-exclamation text-red-500 mr-0.5"},null,-1),qe={class:"mb-2"},je={class:"text-gray-400 mb-1 flex-between-center"},Me=e("span",null,"Mahsulot nomi",-1),Ae=["disabled"],Ue={class:"mb-2"},Be={class:"text-gray-400 mb-1 flex-between-center"},Ee=e("span",null,"Tan narxi",-1),Le=["disabled"],Je={class:"mb-2"},Ke={class:"text-gray-400 mb-1 flex-between-center"},Ge=e("span",null,"Sotiladigan narxi",-1),He=["disabled"],Re={class:"mb-2"},We={class:"text-gray-400 mb-1 flex-between-center"},Xe=e("span",null,"O'lcham turi",-1),Ye={class:"text-gray-400 mb-1 flex-between-center"},Ze=e("span",null,"O'lchamlar",-1),et=["disabled"],tt={key:1,class:"text-rose-500 text-center mt-2"},at=h({__name:"FormAddProduct",emits:["create-product"],setup(t,{emit:c}){const l=E(),m=G(),a=V({categories:[],sizeNames:[],selectCategory:!1,category_id:null,category_name:null});function d(g){a.selectCategory=g}axios.all([axios.get("categories"),axios.get("sizenames")]).then(axios.spread((g,r)=>{a.categories=g.data,a.sizeNames=r.data}));const n={name:"",original_price:"",price:"",size_names_id:null,products:[],category_id:null},p=C(!1),o=V({...n});L(()=>a.category_id,g=>{a.selectCategory=!1});function $(){if(N.value==!1)return p.value=!0,setTimeout(()=>p.value=!1,3e3);o.category_id=a.category_id,axios.post("/productnames",o).then(({data:g})=>{Object.assign(o,n),c("create-product",g),m.getQrcode?(l.productName=null,setTimeout(()=>l.productName=g)):(l.productQrName=null,setTimeout(()=>l.productQrName=g))})}const N=k(()=>o.name.trim()!=""&&o.original_price!=""&&o.price!=""&&o.size_names_id!=null&&O.value!=0),f=k(()=>a.category_id==null),O=k(()=>o.products.length==0?0:o.products.reduce((g,r)=>g+ +r.count,0));return(g,r)=>(s(),i("form",{onSubmit:I($,["prevent"]),class:"w-60"},[e("div",we,[e("button",{onClick:r[0]||(r[0]=_=>u(m).setQrcode(!1)),class:b([{"bg-pink-500 text-white":u(m).getQrcode==!1},"bg-gray-100 hover:opacity-60 active:bg-pink-500 active:text-white w-7 shadow-sm rounded-sm"]),type:"button"},De,2),e("button",{onClick:r[1]||(r[1]=_=>u(m).setQrcode(!0)),class:b([{"bg-pink-500 text-white":u(m).getQrcode},"bg-gray-100 hover:opacity-60 active:bg-pink-500 active:text-white w-7 shadow-sm rounded-sm"]),type:"button"},Fe,2)]),a.selectCategory?(s(),i("section",{key:0,onClick:r[4]||(r[4]=_=>d(!1)),class:"full-absolute items-start z-[100] p-8"},[e("main",{onClick:r[3]||(r[3]=I(()=>{},["stop"])),class:"bg-white min-w-[630px] w-[900px] max-h-full border-t-2 border-pink-500 px-4 py-3 relative"},[e("button",{onClick:r[2]||(r[2]=_=>d(!1)),type:"button",class:"absolute top-0 right-0 hover:bg-gray-100"},Se),Pe,(s(!0),i(S,null,P(a.categories,_=>(s(),w(X,{Categories:a.categories,category:_,PageData:a},null,8,["Categories","category","PageData"]))),256))])])):T("",!0),e("div",Ne,[Oe,e("main",{onClick:r[5]||(r[5]=_=>d(!0))},[a.category_name?(s(),i("div",ze,[e("span",Ve,F(a.category_name),1)])):(s(),i("div",Ie,[J(" Tanlang "),Qe]))])]),e("div",qe,[e("label",je,[Me,y(x,{FormData:o,keyname:"name",inputType:"string"},null,8,["FormData"])]),v(e("input",{type:"text","onUpdate:modelValue":r[6]||(r[6]=_=>o.name=_),class:"text-input",placeholder:"Mahsulot nomi",disabled:u(f)},null,8,Ae),[[D,o.name]])]),e("div",Ue,[e("label",Be,[Ee,y(x,{FormData:o,keyname:"original_price",inputType:"number"},null,8,["FormData"])]),v(e("input",{type:"number","onUpdate:modelValue":r[7]||(r[7]=_=>o.original_price=_),class:"text-input",placeholder:"Tan narxi",disabled:u(f)},null,8,Le),[[D,o.original_price]])]),e("div",Je,[e("label",Ke,[Ge,y(x,{FormData:o,keyname:"price",inputType:"number"},null,8,["FormData"])]),v(e("input",{type:"number","onUpdate:modelValue":r[8]||(r[8]=_=>o.price=_),class:"text-input",placeholder:"Sotiladigan narxi",disabled:u(f)},null,8,He),[[D,o.price]])]),e("div",Re,[e("label",We,[Xe,y(x,{FormData:o,keyname:"size_names_id",inputType:"nullable"},null,8,["FormData"])]),y(se,{PageData:a,FormData:o,disabled:u(f)},null,8,["PageData","FormData","disabled"])]),e("label",Ye,[Ze,y(x,{FormData:o,keyname:"sizes",value:u(O),inputType:"array"},null,8,["FormData","value"])]),y(ke,{class:"-mx-4 px-4",FormData:o},null,8,["FormData"]),e("button",{class:b([{"!bg-gray-200":u(f),"!bg-pink-500 text-white":u(N)&&u(f)==!1},"px-2 py-0.5 bg-gray-300 rounded-sm w-full shadow active:bg-gray-200"]),disabled:u(f),type:"submit"}," Kiritish ",10,et),p.value?(s(),i("div",tt," Malumotlar to'liq kiritilmagan ")):T("",!0)],40,ve))}}),st={class:"relative flex items-start",name:"indexSale"},nt=h({__name:"IndexIntroduction",setup(t){const c=j(),l=C(null),m=C(null);function a(d){d.products.forEach(n=>n.product_names={name:d.name}),c.getListType?l.value.agGrid.api.applyTransaction({add:[d],addIndex:0}):m.value.productAgGrid.api.applyTransaction({add:d.products,addIndex:0})}return(d,n)=>(s(),i("section",st,[y(at,{onCreateProduct:n[0]||(n[0]=p=>a(p))}),u(c).getListType?(s(),w(M,{key:0,editable:!0,ref_key:"productNames",ref:l,class:"ml-4 pl-4 border-l h-full"},null,512)):(s(),w(A,{key:1,ref_key:"products",ref:m,editable:!0,class:"ml-4 pl-4 border-l h-full"},null,512))]))}});const rt=K(nt,[["__scopeId","data-v-bdc717da"]]);export{rt as default};
