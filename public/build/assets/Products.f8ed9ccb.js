import{C as Y,r as f,b as K,e as O,_ as I,o as h,c as v,a as t,k,v as U,d as q,I as Z,m as H,J as G,q as T,z as M,t as S,F as ee,i as te,l as L,u as R,h as P,f as A,j as ae,G as E,H as B,w as le,g as ne,T as ie,n as V,K as z}from"./app.93c92701.js";function J(n,o){return localStorage.getItem(n)!=null||localStorage.setItem(n,o),localStorage.getItem(n)}function oe(n,o){localStorage.setItem(n,o)}const W=Y("listType",()=>{const n=f(JSON.parse(J("listType",!0))),o=K(()=>n.value);function a(c){oe("listType",c),n.value=JSON.parse(J("listType",!0))}return{type:n,setListType:a,getListType:o}}),se={setup(n){const o=f(n.params.value),a=f();return O(()=>{setTimeout(()=>a.value.focus())}),{value:o,inputNumber:a,getValue:()=>o.value}}},re={class:"flex"},de=t("i",{class:"far fa-angle-left"},null,-1),ce=[de],ue=t("i",{class:"far fa-angle-right"},null,-1),pe=[ue];function me(n,o,a,c,b,p){return h(),v("section",re,[t("button",{class:"px-3",onClick:o[0]||(o[0]=d=>c.value--)},ce),k(t("input",{type:"number",ref:"inputNumber","onUpdate:modelValue":o[1]||(o[1]=d=>c.value=d),class:"outline-none w-10 flex-grow text-center"},null,512),[[U,c.value]]),t("button",{class:"px-3",onClick:o[2]||(o[2]=d=>c.value++)},pe)])}const X=I(se,[["render",me]]),fe={setup(n){const o=f(n.params.value),a=f();return O(()=>{setTimeout(()=>a.value.focus())}),{value:o,inputNumber:a,getValue:()=>o.value}}},ge={class:"flex"};function he(n,o,a,c,b,p){return h(),v("section",ge,[k(t("input",{ref:"inputNumber",type:"number","onUpdate:modelValue":o[0]||(o[0]=d=>c.value=d),class:"outline-none w-10 flex-grow text-center"},null,512),[[U,c.value]])])}const D=I(fe,[["render",he]]),Q=n=>(E("data-v-35aad594"),n=n(),B(),n),be={class:"flex-between-center bg-gray-100 border-b -m-2 mb-0"},_e={class:"px-3 font-semibold"},ve=Q(()=>t("i",{class:"far fa-times text-red-500"},null,-1)),xe=[ve],ye={class:"py-1.5 flex-between-center"},we={class:"font-semibold text-pink-500"},Ce={key:0,class:"flex"},Ne=["onClick"],$e=Q(()=>t("i",{class:"fal fa-plus text-xs"},null,-1)),ke={class:"flex-grow"},Re={key:0,class:"mt-3 text-right"},Ie=Q(()=>t("i",{class:"far fa-trash text-pink-500 mr-2"},null,-1)),Te=q({__name:"ProductName",props:{productName:Object,gridApi:Z,editable:{type:Boolean,default:!1}},emits:["close","deleteProduct"],setup(n,{emit:o}){const{productName:a,gridApi:c,editable:b}=n,p=H("getProductById",null),d=G(),u=T({size_name:null,sizes:[]}),y=K(()=>u.sizes.filter(i=>{if(a.products.find(x=>x.size_id==i.id)==null)return!0}));axios.get(`sizenames/${a.size_names_id}`).then(i=>{u.size_name=i.data.name,u.sizes=i.data.sizes});const w=f([{headerName:"ID",field:"id",width:65},{headerName:"O'lchami",field:"size.name",flex:1},{headerName:"Tan narxi",field:"original_price",editable:!0,width:115,cellEditor:D},{headerName:"Sotuv narxi",field:"price",editable:!0,width:115,cellEditor:D},{headerName:"Soni",field:"count",editable:!0,width:120,cellEditor:X},{headerName:"Kiritilgan sana",field:"created_at",editable:!0,width:115,cellRenderer:i=>moment(i.value).fromNow()},{width:50,headerName:"",onCellClicked:i=>N(i.data),cellRenderer:()=>'<i class="fa-sharp fa-light fa-qrcode text-blue-500"></i>',cellClass:["hover:bg-gray-200","text-center","active:bg-gray-300"]},{width:50,headerName:"",onCellClicked:i=>C(i.data),cellRenderer:()=>'<i class="far fa-barcode-read text-blue-500"></i>',cellClass:["hover:bg-gray-200","text-center","active:bg-gray-300"]},{width:50,headerName:"",hide:b==!1,onCellClicked:i=>_(i.data),cellRenderer:()=>'<i class="fal fa-trash text-pink-500"></i>',cellClass:["hover:bg-gray-200","text-center","active:bg-gray-300"]},{suppressMovable:!0,pinned:"right",width:50,hide:p==null,headerName:"",onCellClicked:i=>{p(i.data.id),setTimeout(()=>o("close"),250)},cellRenderer:()=>'<i class="fa-regular fa-bag-shopping text-orange-600"></i>',cellClass:["hover:bg-gray-200","text-center","active:bg-gray-300"]}]);function C(i){d.productName=null;const s={...i};s.count=1,setTimeout(()=>{d.productName={name:a.name,products:[s]}})}function N(i){d.productQrName=null;const s={...i};s.count=1,setTimeout(()=>{d.productQrName={name:a.name,products:[s]}})}function _(i){swal.fire({title:"Aniq o'chirmoqchimisiz?",text:"Jarayonni orqaga qaytarib bo'lmaydi!",icon:"warning"}).then(s=>{s.isConfirmed&&axios.delete(`products/${i.id}`).then(()=>{m.api.applyTransaction({remove:[i]}),a.products=a.products.filter(x=>x.id!=i.id),l(a)})})}function $(i){const s=a.products[a.products.length-1],x={product_names_id:a.id,size_id:i.id,original_price:s?s.original_price:0,price:s?s.price:0,count:1};axios.post("products",x).then(({data:g})=>{a.products.push(g),m.api.applyTransaction({add:[g]}),l(a)})}function e(i){const s=i.data;axios.put(`products/${s.id}`,s).then(()=>{l(a)})}function l(i){c.getRowNode(i.id).setData(i)}const m=T({api:null,columnApi:null});function r(i){m.api=i.api,m.columnApi=i.columnApi}return(i,s)=>{const x=M("AgGridVue");return h(),v("section",{onClick:s[3]||(s[3]=g=>i.$emit("close")),class:"full-absolute z-[70] p-8"},[t("main",{onClick:s[2]||(s[2]=ae(()=>{},["stop"])),class:"h-full min-w-[630px] w-[900px] bg-white flex flex-col justify-between p-2"},[t("header",be,[t("div",_e,S(n.productName.name),1),t("button",{onClick:s[0]||(s[0]=g=>i.$emit("close")),class:"px-4 py-2 hover:bg-gray-200"},xe)]),t("div",ye,[t("span",null,[t("span",we,S(u.size_name),1)]),n.editable?(h(),v("div",Ce,[(h(!0),v(ee,null,te(R(y),g=>(h(),v("button",{onClick:Ye=>$(g),class:"mini-button ml-3 text-gray-600"},[$e,L(),t("span",null,S(g.name),1)],8,Ne))),256))])):P("",!0)]),t("aside",ke,[A(x,{class:"h-full ag-theme-alpine",headerHeight:30,getRowId:g=>g.data.id,rowData:n.productName.products,columnDefs:w.value,onCellValueChanged:e,onGridReady:r,animateRows:!0,undoRedoCellEditing:!0},null,8,["getRowId","rowData","columnDefs"])]),n.editable?(h(),v("div",Re,[t("button",{onClick:s[1]||(s[1]=g=>i.$emit("deleteProduct",n.productName)),class:"py-1 px-3 bg-gray-200 shadow border-b-2 border-pink-500 active:bg-gray-300"},[Ie,L(" Mahsulotni o'chirish ")])])):P("",!0)])])}}});const Ae=I(Te,[["__scopeId","data-v-35aad594"]]),F=n=>(E("data-v-fa74b6ad"),n=n(),B(),n),De={class:"flex-grow flex flex-col"},Se={class:"bg-white px-1 py-2 flex items-center justify-between"},Ve={class:"flex items-center"},ze=F(()=>t("label",{for:"searchInput"},null,-1)),Pe=F(()=>t("i",{class:"fal fa-search text-sm mr-4 relative top-px"},null,-1)),qe={class:"flex items-center"},Ge={class:"mr-10 flex text-gray-500 items-center"},Me={class:"mx-2"},Ee=F(()=>t("i",{class:"fa-regular fa-list-ul"},null,-1)),Be=[Ee],Qe={class:"flex-grow"},Fe=q({__name:"ProductNames",props:["editable"],setup(n,{expose:o}){const a=f("contain"),c=f(null);axios.get("productnames").then(({data:e})=>c.value=e);const b=W(),p=G(),d=f(null),u=T({api:null,columnApi:null});o({agGrid:u});function y(e){d.value=null,setTimeout(()=>d.value=e.data)}function w(e){u.api=e.api,u.columnApi=e.columnApi}function C(e){swal.fire({title:"Aniq o'chirmoqchimisiz?",text:"Jarayonni orqaga qaytarib bo'lmaydi!",icon:"warning"}).then(l=>{l.isConfirmed&&axios.put(`productnames/delete/${e.id}`,e).then(()=>{if(e.sells_sum_count){const m=u.api.getRowNode(e.id);e.products=[],m.setData(e)}else u.api.applyTransaction({remove:[e]});d.value=null})})}function N(e){const l=e.data.products.reduce((m,r)=>m+r.count,0);return a.value=="empty"?l==0:a.value=="contain"?l!=0:!0}function _(e){axios.put(`productnames/${e.data.id}`,e.data)}const $=f([{headerName:"Nomi",field:"name",flex:1,editable:!0},{sortable:!0,resizable:!0,headerName:"Soni",field:"products",width:85,cellRenderer:e=>e.value.reduce((l,m)=>l+m.count,0)},{sortable:!0,headerName:"Turi",field:"category.name",width:120},{sortable:!0,headerName:"Kiritilgan vaqt",field:"created_at",width:120,cellRenderer:e=>moment(e.value).fromNow()},{suppressMovable:!0,pinned:"right",width:50,headerName:"",onCellClicked:e=>{p.productQrName=null,setTimeout(()=>p.productQrName=e.data)},cellRenderer:()=>'<i class="fa-sharp fa-light fa-qrcode text-blue-500"></i>',cellClass:["hover:bg-gray-200","text-center","active:bg-gray-300"]},{suppressMovable:!0,pinned:"right",headerName:"",width:50,cellClass:["hover:bg-white","cursor-pointer","text-center"],cellRenderer:()=>'<i class="far fa-barcode-read text-blue-500"></i>',onCellClicked:e=>{p.productName=null,setTimeout(()=>p.productName=e.data)}},{suppressMovable:!0,pinned:"right",headerName:"",width:50,cellClass:["hover:bg-white","cursor-pointer","text-center"],cellRenderer:()=>'<i class="fal fa-folder-open text-blue-500"></i>',onCellClicked:e=>y(e)}]);return(e,l)=>{const m=M("AgGridVue");return h(),v("main",De,[A(ie,{name:"fade"},{default:le(()=>[d.value?(h(),ne(Ae,{key:0,gridApi:u.api,productName:d.value,editable:n.editable,onClose:l[0]||(l[0]=r=>d.value=null),onDeleteProduct:C},null,8,["gridApi","productName","editable"])):P("",!0)]),_:1}),t("section",Se,[t("main",Ve,[ze,Pe,t("input",{onInput:l[1]||(l[1]=r=>u.api.setQuickFilter(r.target.value)),id:"searchInput",type:"text",class:"py-0.5 bg-inherit w-full outline-none",placeholder:"Izlash"},null,32)]),t("main",qe,[t("div",Ge,[t("article",null,[t("label",{for:"alls",class:V(["flex items-center px-1 border-b border-transparent",{"text-pink-500 !border-pink-300":a.value=="all"}])}," Barchasi ",2),k(t("input",{hidden:"",id:"alls",type:"radio",name:"filte",onChange:l[2]||(l[2]=r=>u.api.onFilterChanged()),"onUpdate:modelValue":l[3]||(l[3]=r=>a.value=r),value:"all"},null,544),[[z,a.value]])]),t("article",Me,[t("label",{for:"contains",class:V(["flex items-center px-1 border-b border-transparent",{"text-pink-500 !border-pink-300":a.value=="contain"}])}," Mavjud ",2),k(t("input",{hidden:"",id:"contains",type:"radio",name:"filte",onChange:l[4]||(l[4]=r=>u.api.onFilterChanged()),"onUpdate:modelValue":l[5]||(l[5]=r=>a.value=r),value:"contain"},null,544),[[z,a.value]])]),t("article",null,[t("label",{for:"emptys",class:V(["flex items-center px-1 border-b border-transparent",{"text-pink-500 !border-pink-300":a.value=="empty"}])}," Qolmagan ",2),k(t("input",{hidden:"",id:"emptys",type:"radio",name:"filte",onChange:l[6]||(l[6]=r=>u.api.onFilterChanged()),"onUpdate:modelValue":l[7]||(l[7]=r=>a.value=r),value:"empty"},null,544),[[z,a.value]])])]),t("button",{onClick:l[8]||(l[8]=r=>R(b).setListType(!R(b).type)),type:"button",class:"text-xl text-blue-600"},Be)])]),t("section",Qe,[A(m,{class:"h-full ag-theme-alpine",headerHeight:30,getRowId:r=>r.data.id,rowData:c.value,columnDefs:$.value,animateRows:!0,onCellValueChanged:_,onGridReady:w,undoRedoCellEditing:!0,undoRedoCellEditingLimit:20,doesExternalFilterPass:N,isExternalFilterPresent:()=>a.value!="all"},null,8,["getRowId","rowData","columnDefs","isExternalFilterPresent"])])])}}});const et=I(Fe,[["__scopeId","data-v-fa74b6ad"]]),j=n=>(E("data-v-be5c2501"),n=n(),B(),n),je={class:"flex-grow flex flex-col"},Le={class:"bg-white px-1 py-2 flex items-center justify-between"},Je={class:"flex items-center"},Ke=j(()=>t("label",{for:"searchInput"},null,-1)),Oe=j(()=>t("i",{class:"fal fa-search text-sm mr-4 relative top-px"},null,-1)),Ue=j(()=>t("i",{class:"fa-light fa-list-tree"},null,-1)),He=[Ue],We={class:"flex-grow"},Xe=q({__name:"Products",props:{editable:{type:Boolean,default:!1}},setup(n,{expose:o}){const{editable:a}=n,c=W(),b=H("getProductById",null),p=G(),d=f();axios.get("products").then(({data:e})=>{d.value=e});const u=f([{suppressMovable:!0,pinned:"left",headerName:"ID",field:"id",width:70},{headerName:"Nomi",field:"product_names.name",flex:1,minWidth:140},{headerName:"O'lchami",field:"size.name",width:80},{headerName:"Tan narxi",field:"original_price",hide:a==!1,editable:a,width:115,cellEditor:D},{headerName:"Narxi",field:"price",editable:a,width:115,cellEditor:D},{headerName:"Soni",field:"count",editable:a,width:130,cellEditor:X},{headerName:"Kiritilgan sana",field:"created_at",editable:a,width:115,cellRenderer:e=>moment(e.value).fromNow()},{suppressMovable:!0,pinned:"right",width:50,headerName:"",onCellClicked:e=>w(e.data),cellRenderer:()=>'<i class="fa-sharp fa-light fa-qrcode text-blue-500"></i>',cellClass:["hover:bg-gray-200","text-center","active:bg-gray-300"]},{suppressMovable:!0,pinned:"right",width:50,headerName:"",onCellClicked:e=>y(e.data),cellRenderer:()=>'<i class="far fa-barcode-read text-blue-500"></i>',cellClass:["hover:bg-gray-200","text-center","active:bg-gray-300"]},{suppressMovable:!0,pinned:"right",width:50,hide:a==!1,headerName:"",onCellClicked:e=>C(e.data),cellRenderer:()=>'<i class="fal fa-trash text-pink-500"></i>',cellClass:["hover:bg-gray-200","text-center","active:bg-gray-300"]},{suppressMovable:!0,pinned:"right",width:50,hide:b==null,headerName:"",onCellClicked:e=>b(e.data.id),cellRenderer:()=>'<i class="fa-regular fa-bag-shopping text-orange-600"></i>',cellClass:["hover:bg-gray-200","text-center","active:bg-gray-300"]}]);function y(e){p.productName=null;const l={...e};l.count=1,setTimeout(()=>{p.productName={name:e.product_names.name,products:[l]}})}function w(e){p.productQrName=null;const l={...e};l.count=1,setTimeout(()=>{p.productQrName={name:e.product_names.name,products:[l]}})}function C(e){a!=!1&&swal.fire({title:"Aniq o'chirmoqchimisiz?",text:"Jarayonni orqaga qaytarib bo'lmaydi!",icon:"warning"}).then(l=>{l.isConfirmed&&axios.delete(`products/${e.id}`).then(()=>{_.api.applyTransaction({remove:[e]})})})}function N(e){if(a==!1)return;const l=e.data;axios.put(`products/${l.id}`,l).then(()=>{})}const _=T({api:null,columnApi:null});function $(e){_.api=e.api,_.columnApi=e.columnApi}return o({productAgGrid:_}),(e,l)=>{const m=M("AgGridVue");return h(),v("aside",je,[t("section",Le,[t("main",Je,[Ke,Oe,t("input",{onInput:l[0]||(l[0]=r=>_.api.setQuickFilter(r.target.value)),id:"searchInput",type:"text",class:"py-0.5 bg-inherit w-full outline-none",placeholder:"Izlash"},null,32)]),t("button",{onClick:l[1]||(l[1]=r=>R(c).setListType(!R(c).type)),type:"button",class:"text-xl text-blue-600"},He)]),t("section",We,[A(m,{class:"h-full ag-theme-alpine",headerHeight:30,getRowId:r=>r.data.id,rowData:d.value,columnDefs:u.value,onCellValueChanged:N,onGridReady:$,animateRows:!0,undoRedoCellEditing:!0},null,8,["getRowId","rowData","columnDefs"])])])}}});const tt=I(Xe,[["__scopeId","data-v-be5c2501"]]);export{et as P,tt as a,J as g,oe as s,W as u};
